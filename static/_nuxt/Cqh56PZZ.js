const __vite__fileDeps=["./UsC6aVIr.js","./bjf-NvUt.js","./C9ChUEiT.js","./qv3OBjIy.js","./C3ufJ4IZ.js","./entry.LELOcLbp.css","./BQkc-AXV.js","./Icon.8lQfE3Ql.css","./C1_kPX_z.js","./index.C1Qrc8QE.css","./BZ3NmyEo.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{a6 as g}from"./C3ufJ4IZ.js";import{R as p,I as u,B as C,S as f,d as m,n as h}from"./bjf-NvUt.js";function w(){return"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"}function E(){var a;return!!((a=window.cast)!=null&&a.framework)}function v(){var a,e;return!!((e=(a=window.chrome)==null?void 0:a.cast)!=null&&e.isAvailable)}function l(){return s().getCastState()===cast.framework.CastState.CONNECTED}function s(){return window.cast.framework.CastContext.getInstance()}function d(){return s().getCurrentSession()}function y(){var a;return(a=d())==null?void 0:a.getSessionObj().media[0]}function A(a){var t;return((t=y())==null?void 0:t.media.contentId)===(a==null?void 0:a.src)}function S(){return{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0}}function _(a){return`Google Cast Error Code: ${a}`}function D(a,e){return p(s(),a,e)}class I{constructor(){this.name="google-cast"}get cast(){return s()}mediaType(){return"video"}canPlay(e){return u&&!C&&f(e)}async prompt(e){var i;let t,o,r;try{t=await this.Ej(e),this.f||(this.f=new cast.framework.RemotePlayer,new cast.framework.RemotePlayerController(this.f)),o=e.player.createEvent("google-cast-prompt-open",{trigger:t}),e.player.dispatchEvent(o),this.Ce(e,"connecting",o),await this.Fj(m(e.$props.googleCast)),e.$state.remotePlaybackInfo.set({deviceName:(i=d())==null?void 0:i.getCastDevice().friendlyName}),l()&&this.Ce(e,"connected",o)}catch(n){const c=n instanceof Error?n:this.De((n+"").toUpperCase(),"Prompt failed.");throw r=e.player.createEvent("google-cast-prompt-error",{detail:c,trigger:o??t,cancelable:!0}),e.player.dispatch(r),this.Ce(e,l()?"connected":"disconnected",r),c}finally{e.player.dispatch("google-cast-prompt-close",{trigger:r??o??t})}}async load(e){if(!this.f)throw Error("[vidstack] google cast player was not initialized");return new(await g(()=>import("./UsC6aVIr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)).GoogleCastProvider(this.f,e)}async Ej(e){if(E())return;const t=e.player.createEvent("google-cast-load-start");e.player.dispatch(t),await h(w()),await customElements.whenDefined("google-cast-launcher");const o=e.player.createEvent("google-cast-loaded",{trigger:t});if(e.player.dispatch(o),!v())throw this.De("CAST_NOT_AVAILABLE","Google Cast not available on this platform.");return o}async Fj(e){this.Gj(e);const t=await this.cast.requestSession();if(t)throw this.De(t.toUpperCase(),_(t))}Gj(e){var t;(t=this.cast)==null||t.setOptions({...S(),...e})}Ce(e,t,o){const r={type:"google-cast",state:t};e.delegate.c("remote-playback-change",r,o)}De(e,t){const o=Error(t);return o.code=e,o}}const b=Object.freeze(Object.defineProperty({__proto__:null,GoogleCastLoader:I},Symbol.toStringTag,{value:"Module"}));export{d as a,y as b,_ as c,s as g,A as h,D as l,b as v};
